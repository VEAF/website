{% extends 'layout.html.twig' %}

{% block title %}{{ parent() }} - Profil de {{ user.nickname }}{% endblock %}

{% block pageContent %}
    <div class="container container-main pt-3 pb-3 mb-3">
        <h1>
            Profil de {{ user.nickname }}
            {% if app.user is not null and user == app.user %}
                <div class="float-right">
                    <a href="{{ path('profile') }}" class="btn btn-link" title="Modifier mon profil">
                        <i class="fa fa-edit fa-2x"></i>
                    </a>
                </div>
            {% endif %}
        </h1>
    </div>
    {% if totalHours > 0 %}
        <div class="container container-main mb-3">
            <div class="row justify-content-center">
                <div class="col-lg-4 pt-3">
                    <div class="card text-white bg-dark card-stats">
                        <div class="card-header">Total heures</div>
                        <div class="card-body">
                            <i class="fa fa-clock fa-4x"></i>
                            <div class="float-right card-stats-text text-right">
                                {{ totalHours | number_format(1, '.', ' ') }} h
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 pt-3">
                    <div class="card text-white bg-dark card-stats">
                        <div class="card-header">Avion favori</div>
                        <div class="card-body">
                            {% if morePlayedAircraft is not null and morePlayedAircraft.module is not null %}
                                <i class="fa fa-plane fa-4x"></i>
                                <div class="float-right card-stats-text text-right">
                                    {{ morePlayedAircraft.module.name }}<br/>
                                    <small>{{ morePlayedAircraft.totalHours | number_format(1, '.', ' ') }} h</small>
                                </div>
                            {% else %}
                                <div class="text-center">
                                    <i>sans informations</i>
                                </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 pt-3">
                    <div class="card text-white bg-dark mb-3 card-stats">
                        <div class="card-header">Hélicoptère favori</div>
                        <div class="card-body">
                            {% if morePlayedHelicopter is not null and morePlayedHelicopter.module is not null %}
                                <i class="fa fa-helicopter fa-4x"></i>
                                {{ morePlayedHelicopter.module.name }}<br/>
                                <small>{{ morePlayedHelicopter.totalHours | number_format(1, '.', ' ') }} h</small>
                            {% else %}
                                <div class="text-center">
                                    <i>sans informations</i>
                                </div>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </div>    {% endif %}
    <div class="container container-main pt-3 pb-3 mb-3">
        <h1>Modules</h1>

        {% for moduleTypeKey,moduleType in moduleTypes %}
            {% if attribute(userModulesTypes,moduleTypeKey) is defined %}
                {% set userModules=attribute(userModulesTypes,moduleTypeKey) %}
                <hr/>
                <h2>{{ moduleType }}
                    <div class="float-right">
                        <span class="badge badge-primary badge-pill"
                              title="Nombre de modules en sa possession">{{ userModules|length }}</span>
                    </div>
                </h2>
                <table class="table table-striped table-bordered table-hover">
                    <thead>
                    <tr>
                        <th>
                            Module
                        </th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for userModule in userModules %}
                        <tr>
                            <td>
                                {{ userModule.module.name }}
                                <div class="float-right">
                                    {% include 'roster/_user_module.html.twig' with {'userModule': userModule} %}
                                </div>
                            </td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            {% endif %}
        {% endfor %}
    </div>
{% endblock pageContent %}
