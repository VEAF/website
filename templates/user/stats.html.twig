{% extends 'layout.html.twig' %}
{# require datatable #}
{% set libDatatable=true %}

{% block title %}{{ parent() }} - Profil de {{ user.nickname }}{% endblock %}

{% block pageContent %}
    <div class="container container-main pt-3 pb-3 mb-3">
        <h1>
            Statistiques de <a href="{{ path('user_view', {'user': user.nickname}) }}">{{ user.nickname }}</a>
        </h1>
    </div>
    <div class="container container-main mb-3">
        <div class="row justify-content-center">
            <div class="col-lg-6 pt-3">
                <div class="alert alert-warning text-center">
                    <i class="fa fa-exclamation-triangle"></i>
                    Fonctionnalité en cours de développement
                    <i class="fa fa-exclamation-triangle"></i>
                </div>
            </div>
        </div>
    </div>
    {% if stats is defined %}
        <div class="container container-main mb-3 pb-3">
            <div class="row justify-content-center">
                <div class="col-lg-3 pt-3">
                    <div class="card text-white bg-dark card-stats card-stats-small">
                        <div class="card-header">Total heures</div>
                        <div class="card-body">
                            <i class="fa fa-clock fa-3x"></i>
                            <div class="float-right card-stats-text text-right">
                                {{ stats.totalHours | number_format(1, '.', ' ') }}<small>h</small>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 pt-3">
                    <div class="card text-white bg-dark card-stats card-stats-small">
                        <div class="card-header">En l'air</div>
                        <div class="card-body">
                            <i class="fa fa-plane fa-3x"></i>
                            <div class="float-right card-stats-text text-right">
                                {{ stats.inAirHours | number_format(1, '.', ' ') }}<small>h</small>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 pt-3">
                    <div class="card text-white bg-dark card-stats card-stats-small">
                        <div class="card-header">Décollages</div>
                        <div class="card-body">
                            <i class="fa fa-plane-departure fa-3x"></i>
                            <div class="float-right card-stats-text text-right">
                                {{ stats.takeoffTotal | number_format(0, '.', ' ') }}
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 pt-3">
                    <div class="card text-white bg-dark card-stats card-stats-small">
                        <div class="card-header">Atterrissages</div>
                        <div class="card-body">
                            <i class="fa fa-plane-arrival fa-3x"></i>
                            <div class="float-right card-stats-text text-right">
                                {{ stats.landingTotal | number_format(0, '.', ' ') }}
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 pt-3">
                    <div class="card text-white bg-dark card-stats card-stats-small">
                        <div class="card-header">Ejections</div>
                        <div class="card-body">
                            <i class="fa fa-parachute-box fa-3x"></i>
                            <div class="float-right card-stats-text text-right">
                                {{ stats.lossesEject | number_format(0, '.', ' ') }}
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 pt-3">
                    <div class="card text-white bg-dark card-stats card-stats-small">
                        <div class="card-header">Crash</div>
                        <div class="card-body">
                            <i class="fa fa-car-crash fa-3x"></i>
                            <div class="float-right card-stats-text text-right">
                                {{ stats.lossesCrash | number_format(0, '.', ' ') }}
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 pt-3">
                    <div class="card text-white bg-dark card-stats card-stats-small">
                        <div class="card-header">Morts</div>
                        <div class="card-body">
                            <i class="fa fa-heart-broken fa-3x"></i>
                            <div class="float-right card-stats-text text-right">
                                {{ stats.lossesPilotDeath | number_format(0, '.', ' ') }}
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 pt-3">
                    <div class="card text-white bg-dark card-stats card-stats-small">
                        <div class="card-header"><i class="fas fa-crosshairs"></i> Unités au sol</div>
                        <div class="card-body">
                            <i class="fa fa-bus fa-3x"></i>
                            <div class="float-right card-stats-text text-right">
                                {{ stats.killsGroundUnitsTotal | number_format(0, '.', ' ') }}
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 pt-3">
                    <div class="card text-white bg-dark card-stats card-stats-small">
                        <div class="card-header"><i class="fas fa-crosshairs"></i> Avions</div>
                        <div class="card-body">
                            <i class="fa fa-plane fa-3x"></i>
                            <div class="float-right card-stats-text text-right">
                                {{ stats.killsPlanesTotal | number_format(0, '.', ' ') }}
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 pt-3">
                    <div class="card text-white bg-dark card-stats card-stats-small">
                        <div class="card-header"><i class="fas fa-crosshairs"></i> Hélicoptères</div>
                        <div class="card-body">
                            <i class="fa fa-helicopter fa-3x"></i>
                            <div class="float-right card-stats-text text-right">
                                {{ stats.killsHelicoptersTotal | number_format(0, '.', ' ') }}
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 pt-3">
                    <div class="card text-white bg-dark card-stats card-stats-small">
                        <div class="card-header"><i class="fas fa-crosshairs"></i> Bâtiments</div>
                        <div class="card-body">
                            <i class="fa fa-industry fa-3x"></i>
                            <div class="float-right card-stats-text text-right">
                                {{ stats.killsBuildingsTotal | number_format(0, '.', ' ') }}
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-3 pt-3">
                    <div class="card text-white bg-dark card-stats card-stats-small">
                        <div class="card-header"><i class="fas fa-crosshairs"></i> Bateaux</div>
                        <div class="card-body">
                            <i class="fa fa-ship fa-3x"></i>
                            <div class="float-right card-stats-text text-right">
                                {{ stats.killsShipsTotal | number_format(0, '.', ' ') }}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="container container-main mb-3 pt-3 pb-3">
            <div class="row">
                <div class="col-md-12">
                    <table class="table table-striped table-hover datatable">
                        <thead>
                        <tr>
                            <th>
                                Appareil / Variant / Siège
                            </th>
                            <th class="text-right">
                                <i class="fa fa-clock"></i> (h)
                            </th>
                            <th class="text-right">
                                <i class="fa fa-plane-departure"></i>
                            </th>
                            <th class="text-right">
                                <i class="fa fa-plane-arrival"></i>
                            </th>
                            <th class="text-right">
                                <i class="fa fa-bus"></i>
                            </th>
                            <th class="text-right">
                                <i class="fa fa-plane"></i>
                            </th>
                            <th class="text-right">
                                <i class="fa fa-helicopter"></i>
                            </th>
                            <th class="text-right">
                                <i class="fa fa-industry"></i>
                            </th>
                        </tr>
                        </thead>
                        <tbody>
                        {% for statVariant in statsVariants %}
                            <tr>
                                <td>
                                    {{ statVariant.variant.name }}
                                </td>
                                <td class="text-right">
                                    {% if statVariant.totalHours > 0 %}
                                        {{ statVariant.totalHours | number_format(1, '.', ' ') }}
                                    {% endif %}
                                </td>
                                <td class="text-right">
                                    {% if statVariant.takeoffTotal > 0 %}
                                        {{ statVariant.takeoffTotal | number_format(0, '.', ' ') }}
                                    {% endif %}
                                </td>
                                <td class="text-right">
                                    {% if statVariant.landingTotal > 0 %}
                                        {{ statVariant.landingTotal | number_format(0, '.', ' ') }}
                                    {% endif %}
                                </td>
                                <td class="text-right">
                                    {% if statVariant.killsGroundUnitsTotal > 0 %}
                                        {{ statVariant.killsGroundUnitsTotal | number_format(0, '.', ' ') }}
                                    {% endif %}
                                </td>
                                <td class="text-right">
                                    {% if statVariant.killsPlanesTotal > 0 %}
                                        {{ statVariant.killsPlanesTotal | number_format(0, '.', ' ') }}
                                    {% endif %}
                                </td>
                                <td class="text-right">
                                    {% if statVariant.killsHelicoptersTotal > 0 %}
                                        {{ statVariant.killsHelicoptersTotal | number_format(0, '.', ' ') }}
                                    {% endif %}
                                </td>
                                <td class="text-right">
                                    {% if statVariant.killsBuildingsTotal > 0 %}
                                        {{ statVariant.killsBuildingsTotal | number_format(0, '.', ' ') }}
                                    {% endif %}
                                </td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    {% else %}
        <div class="container container-main mb-3 pb-3">
            <div class="row justify-content-center">
                <div class="col-lg-6 pt-3">
                    <div class="alert alert-primary">
                        cet utilisateur n'a pas encore de statistiques.
                    </div>
                </div>
            </div>
        </div>
    {% endif %}
{% endblock pageContent %}

{% block javascript %}
{{ parent() }}
<script type="text/javascript">
$(document).ready( function () {
    $('.datatable').DataTable({
        language: {
            url: '//cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/French.json'
        }
    } );
} );
</script>
{% endblock javascript %}